{"mappings":"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","sources":["./node_modules/@parcel/scope-hoisting/lib/helpers.js","./packages/@react-aria/virtualizer/src/utils.ts","./packages/@react-aria/virtualizer/src/ScrollView.tsx","./packages/@react-aria/virtualizer/src/useVirtualizerItem.ts","./packages/@react-aria/virtualizer/src/VirtualizerItem.tsx","./packages/@react-aria/virtualizer/src/Virtualizer.tsx"],"sourcesContent":["function $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nfunction $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n}\n\nfunction $parcel$exportWildcard(dest, source) {\n  Object.keys(source).forEach(function(key) {\n    if (key === 'default' || key === '__esModule') {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function get() {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n}\n\nfunction $parcel$missingModule(name) {\n  var err = new Error(\"Cannot find module '\" + name + \"'\");\n  err.code = 'MODULE_NOT_FOUND';\n  throw err;\n}\n\nvar $parcel$global =\n  typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n    ? self\n    : typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined'\n    ? global\n    : {};\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {Direction} from '@react-types/shared';\n\nexport type RTLOffsetType =\n  | 'negative'\n  | 'positive-descending'\n  | 'positive-ascending';\n\nlet cachedRTLResult: RTLOffsetType | null = null;\n\n\n// Original licensing for the following methods can be found in the\n// NOTICE file in the root directory of this source tree.\n// See https://github.com/bvaughn/react-window/blob/master/src/createGridComponent.js\n\n// According to the spec, scrollLeft should be negative for RTL aligned elements.\n// Chrome does not seem to adhere; its scrollLeft values are positive (measured relative to the left).\n// Safari's elastic bounce makes detecting this even more complicated wrt potential false positives.\n// The safest way to check this is to intentionally set a negative offset,\n// and then verify that the subsequent \"scroll\" event matches the negative offset.\n// If it does not match, then we can assume a non-standard RTL scroll implementation.\nexport function getRTLOffsetType(recalculate: boolean = false): RTLOffsetType {\n  if (cachedRTLResult === null || recalculate) {\n    const outerDiv = document.createElement('div');\n    const outerStyle = outerDiv.style;\n    outerStyle.width = '50px';\n    outerStyle.height = '50px';\n    outerStyle.overflow = 'scroll';\n    outerStyle.direction = 'rtl';\n\n    const innerDiv = document.createElement('div');\n    const innerStyle = innerDiv.style;\n    innerStyle.width = '100px';\n    innerStyle.height = '100px';\n\n    outerDiv.appendChild(innerDiv);\n\n    document.body.appendChild(outerDiv);\n\n    if (outerDiv.scrollLeft > 0) {\n      cachedRTLResult = 'positive-descending';\n    } else {\n      outerDiv.scrollLeft = 1;\n      if (outerDiv.scrollLeft === 0) {\n        cachedRTLResult = 'negative';\n      } else {\n        cachedRTLResult = 'positive-ascending';\n      }\n    }\n\n    document.body.removeChild(outerDiv);\n\n    return cachedRTLResult;\n  }\n\n  return cachedRTLResult;\n}\n\nexport function getScrollLeft(node: HTMLElement, direction: Direction): number {\n  let {scrollLeft} = node;\n\n  // scrollLeft in rtl locales differs across browsers, so normalize.\n  // See comment by getRTLOffsetType below for details.\n  if (direction === 'rtl') {\n    let {scrollWidth, clientWidth} = node;\n    switch (getRTLOffsetType()) {\n      case 'negative':\n        scrollLeft = -scrollLeft;\n        break;\n      case 'positive-descending':\n        scrollLeft = scrollWidth - clientWidth - scrollLeft;\n        break;\n    }\n  }\n\n  return scrollLeft;\n}\n\nexport function setScrollLeft(node: HTMLElement, direction: Direction, scrollLeft: number) {\n  if (direction === 'rtl') {\n    switch (getRTLOffsetType()) {\n      case 'negative':\n        scrollLeft = -scrollLeft;\n        break;\n      case 'positive-ascending':\n        break;\n      default: {\n        const {clientWidth, scrollWidth} = node;\n        scrollLeft = scrollWidth - clientWidth - scrollLeft;\n        break;\n      }\n    }\n  }\n\n  node.scrollLeft = scrollLeft;\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\n// @ts-ignore\nimport {flushSync} from 'react-dom';\nimport {getScrollLeft} from './utils';\nimport React, {\n  CSSProperties,\n  HTMLAttributes,\n  ReactNode,\n  RefObject,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState\n} from 'react';\nimport {Rect, Size} from '@react-stately/virtualizer';\nimport {useLocale} from '@react-aria/i18n';\n\ninterface ScrollViewProps extends HTMLAttributes<HTMLElement> {\n  contentSize: Size,\n  onVisibleRectChange: (rect: Rect) => void,\n  children: ReactNode,\n  innerStyle?: CSSProperties,\n  sizeToFit?: 'width' | 'height',\n  onScrollStart?: () => void,\n  onScrollEnd?: () => void,\n  scrollDirection?: 'horizontal' | 'vertical' | 'both'\n}\n\nfunction ScrollView(props: ScrollViewProps, ref: RefObject<HTMLDivElement>) {\n  let {\n    contentSize,\n    onVisibleRectChange,\n    children,\n    innerStyle,\n    sizeToFit,\n    onScrollStart,\n    onScrollEnd,\n    scrollDirection = 'both',\n    ...otherProps\n  } = props;\n\n  let defaultRef = useRef();\n  ref = ref || defaultRef;\n  let state = useRef({\n    scrollTop: 0,\n    scrollLeft: 0,\n    scrollEndTime: 0,\n    scrollTimeout: null,\n    width: 0,\n    height: 0,\n    isScrolling: false\n  }).current;\n  let {direction} = useLocale();\n\n  let [isScrolling, setScrolling] = useState(false);\n  let onScroll = useCallback((e) => {\n    if (e.target !== e.currentTarget) {\n      return;\n    }\n\n    if (props.onScroll) {\n      props.onScroll(e);\n    }\n\n    flushSync(() => {\n      let scrollTop = e.currentTarget.scrollTop;\n      let scrollLeft = getScrollLeft(e.currentTarget, direction);\n\n      // Prevent rubber band scrolling from shaking when scrolling out of bounds\n      state.scrollTop = Math.max(0, Math.min(scrollTop, contentSize.height - state.height));\n      state.scrollLeft = Math.max(0, Math.min(scrollLeft, contentSize.width - state.width));\n\n      onVisibleRectChange(new Rect(state.scrollLeft, state.scrollTop, state.width, state.height));\n\n      if (!state.isScrolling) {\n        state.isScrolling = true;\n        setScrolling(true);\n\n        if (onScrollStart) {\n          onScrollStart();\n        }\n      }\n\n      // So we don't constantly call clearTimeout and setTimeout,\n      // keep track of the current timeout time and only reschedule\n      // the timer when it is getting close.\n      let now = Date.now();\n      if (state.scrollEndTime <= now + 50) {\n        state.scrollEndTime = now + 300;\n\n        clearTimeout(state.scrollTimeout);\n        state.scrollTimeout = setTimeout(() => {\n          state.isScrolling = false;\n          setScrolling(false);\n          state.scrollTimeout = null;\n\n          if (onScrollEnd) {\n            onScrollEnd();\n          }\n        }, 300);\n      }\n    });\n  }, [props, direction, state, contentSize, onVisibleRectChange, onScrollStart, onScrollEnd]);\n\n  // eslint-disable-next-line arrow-body-style\n  useEffect(() => {\n    return () => {\n      clearTimeout(state.scrollTimeout);\n    };\n  }, []);\n\n  useLayoutEffect(() => {\n    // TODO: resize observer\n    // https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver\n    let updateSize = () => {\n      let dom = ref.current;\n      if (!dom) {\n        return;\n      }\n\n      let w = dom.clientWidth;\n      let h = dom.clientHeight;\n      if (sizeToFit && contentSize.width > 0 && contentSize.height > 0) {\n        let style = window.getComputedStyle(dom);\n\n        if (sizeToFit === 'width') {\n          w = contentSize.width;\n\n          let maxWidth = parseInt(style.maxWidth, 10);\n          if (!isNaN(maxWidth)) {\n            w = Math.min(maxWidth, w);\n          }\n        } else if (sizeToFit === 'height') {\n          h = contentSize.height;\n\n          let maxHeight = parseInt(style.maxHeight, 10);\n          if (!isNaN(maxHeight)) {\n            h = Math.min(maxHeight, h);\n          }\n        }\n      }\n\n      if (state.width !== w || state.height !== h) {\n        state.width = w;\n        state.height = h;\n        onVisibleRectChange(new Rect(state.scrollLeft, state.scrollTop, w, h));\n      }\n    };\n\n    updateSize();\n    window.addEventListener('resize', updateSize, false);\n    return () => {\n      window.removeEventListener('resize', updateSize, false);\n    };\n  }, [onVisibleRectChange, ref, state, sizeToFit, contentSize]);\n\n  let style: React.CSSProperties = {\n    // Reset padding so that relative positioning works correctly. Padding will be done in JS layout.\n    padding: 0,\n    ...otherProps.style\n  };\n\n  if (scrollDirection === 'horizontal') {\n    style.overflowX = 'auto';\n    style.overflowY = 'hidden';\n  } else if (scrollDirection === 'vertical') {\n    style.overflowY = 'auto';\n    style.overflowX = 'hidden';\n  } else {\n    style.overflow = 'auto';\n  }\n\n  return (\n    <div {...otherProps} style={style} ref={ref} onScroll={onScroll}>\n      <div role=\"presentation\" style={{width: contentSize.width, height: contentSize.height, pointerEvents: isScrolling ? 'none' : 'auto', position: 'relative', ...innerStyle}}>\n        {children}\n      </div>\n    </div>\n  );\n}\n\nconst ScrollViewForwardRef = React.forwardRef(ScrollView);\nexport {ScrollViewForwardRef as ScrollView};\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {RefObject, useCallback, useLayoutEffect} from 'react';\nimport {ReusableView, Size} from '@react-stately/virtualizer';\n\ninterface VirtualizerItemOptions<T extends object, V, W> {\n  reusableView: ReusableView<T, V>,\n  ref: RefObject<HTMLElement>\n}\n\nexport function useVirtualizerItem<T extends object, V, W>(options: VirtualizerItemOptions<T, V, W>) {\n  let {reusableView: {layoutInfo, virtualizer}, ref} = options;\n\n  let updateSize = useCallback(() => {\n    let size = getSize(ref.current);\n    virtualizer.updateItemSize(layoutInfo.key, size);\n  }, [virtualizer, layoutInfo.key, ref]);\n\n  useLayoutEffect(() => {\n    if (layoutInfo.estimatedSize) {\n      updateSize();\n    }\n  });\n\n  return {updateSize};\n}\n\nfunction getSize(node: HTMLElement) {\n  return new Size(node.scrollWidth, node.scrollHeight);\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {Direction} from '@react-types/shared';\nimport {LayoutInfo, ReusableView} from '@react-stately/virtualizer';\nimport React, {CSSProperties, useRef} from 'react';\nimport {useLocale} from '@react-aria/i18n';\nimport {useVirtualizerItem} from './useVirtualizerItem';\n\ninterface VirtualizerItemProps<T extends object, V> {\n  reusableView: ReusableView<T, V>,\n  parent?: ReusableView<T, V>,\n  className?: string\n}\n\nexport function VirtualizerItem<T extends object, V>(props: VirtualizerItemProps<T, V>) {\n  let {className, reusableView, parent} = props;\n  let {direction} = useLocale();\n  let ref = useRef();\n  useVirtualizerItem({\n    reusableView,\n    ref\n  });\n\n  return (\n    <div role=\"presentation\" ref={ref} className={className} style={layoutInfoToStyle(reusableView.layoutInfo, direction, parent && parent.layoutInfo)}>\n      {reusableView.rendered}\n    </div>\n  );\n}\n\nlet cache = new WeakMap();\nexport function layoutInfoToStyle(layoutInfo: LayoutInfo, dir: Direction, parent?: LayoutInfo | null): CSSProperties {\n  let xProperty = dir === 'rtl' ? 'right' : 'left';\n  let cached = cache.get(layoutInfo);\n  if (cached && cached[xProperty] != null) {\n    return cached;\n  }\n\n  let style: CSSProperties = {\n    position: layoutInfo.isSticky ? 'sticky' : 'absolute',\n    overflow: 'hidden',\n    top: layoutInfo.rect.y - (parent ? parent.rect.y : 0),\n    [xProperty]: layoutInfo.rect.x - (parent ? parent.rect.x : 0),\n    transition: 'all',\n    WebkitTransition: 'all',\n    WebkitTransitionDuration: 'inherit',\n    transitionDuration: 'inherit',\n    width: layoutInfo.rect.width + 'px',\n    height: layoutInfo.rect.height + 'px',\n    opacity: layoutInfo.opacity,\n    zIndex: layoutInfo.zIndex,\n    transform: layoutInfo.transform,\n    contain: 'size layout style paint'\n  };\n\n  cache.set(layoutInfo, style);\n  return style;\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {Collection} from '@react-types/shared';\nimport {focusWithoutScrolling, mergeProps} from '@react-aria/utils';\nimport {Layout, Rect, ReusableView, useVirtualizerState, VirtualizerState} from '@react-stately/virtualizer';\nimport React, {FocusEvent, HTMLAttributes, Key, ReactElement, RefObject, useCallback, useEffect, useRef} from 'react';\nimport {ScrollView} from './ScrollView';\nimport {VirtualizerItem} from './VirtualizerItem';\n\ninterface VirtualizerProps<T extends object, V> extends HTMLAttributes<HTMLElement> {\n  children: (type: string, content: T) => V,\n  renderWrapper?: (\n    parent: ReusableView<T, V> | null,\n    reusableView: ReusableView<T, V>,\n    children: ReusableView<T, V>[],\n    renderChildren: (views: ReusableView<T, V>[]) => ReactElement[]\n  ) => ReactElement,\n  layout: Layout<T>,\n  collection: Collection<T>,\n  focusedKey?: Key,\n  sizeToFit?: 'width' | 'height',\n  scrollDirection?: 'horizontal' | 'vertical' | 'both',\n  isLoading?: boolean,\n  onLoadMore?: () => void,\n  transitionDuration?: number\n}\n\nfunction Virtualizer<T extends object, V>(props: VirtualizerProps<T, V>, ref: RefObject<HTMLDivElement>) {\n  let {\n    children: renderView,\n    renderWrapper,\n    layout,\n    collection,\n    sizeToFit,\n    scrollDirection,\n    transitionDuration,\n    isLoading,\n    onLoadMore,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    focusedKey,\n    ...otherProps\n  } = props;\n\n  let fallbackRef = useRef<HTMLDivElement>();\n  ref = ref || fallbackRef;\n\n  let state = useVirtualizerState({\n    transitionDuration,\n    layout,\n    collection,\n    renderView,\n    renderWrapper: renderWrapper || defaultRenderWrapper,\n    onVisibleRectChange(rect) {\n      ref.current.scrollLeft = rect.x;\n      ref.current.scrollTop = rect.y;\n    }\n  });\n\n  let {virtualizerProps} = useVirtualizer(props, state, ref);\n\n  // Handle scrolling, and call onLoadMore when nearing the bottom.\n  let onVisibleRectChange = useCallback((rect: Rect) => {\n    state.setVisibleRect(rect);\n\n    if (!isLoading && onLoadMore) {\n      let scrollOffset = state.virtualizer.contentSize.height - rect.height * 2;\n      if (rect.y > scrollOffset) {\n        onLoadMore();\n      }\n    }\n  }, [isLoading, onLoadMore, state]);\n\n  return (\n    <ScrollView\n      {...mergeProps(otherProps, virtualizerProps)}\n      ref={ref}\n      innerStyle={state.isAnimating ? {transition: `none ${state.virtualizer.transitionDuration}ms`} : undefined}\n      contentSize={state.contentSize}\n      onVisibleRectChange={onVisibleRectChange}\n      onScrollStart={state.startScrolling}\n      onScrollEnd={state.endScrolling}\n      sizeToFit={sizeToFit}\n      scrollDirection={scrollDirection}>\n      {state.visibleViews}\n    </ScrollView>\n  );\n}\n\ninterface VirtualizerOptions {\n  focusedKey?: Key,\n  scrollToItem?: (key: Key) => void\n}\n\nexport function useVirtualizer<T extends object, V, W>(props: VirtualizerOptions, state: VirtualizerState<T, V, W>, ref: RefObject<HTMLElement>) {\n  let {focusedKey, scrollToItem} = props;\n  let {virtualizer} = state;\n\n  // Scroll to the focusedKey when it changes. Actually focusing the focusedKey\n  // is up to the implementation using Virtualizer since we don't have refs\n  // to all of the item DOM nodes.\n  let lastFocusedKey = useRef(null);\n  useEffect(() => {\n    if (virtualizer.visibleRect.height === 0) {\n      return;\n    }\n\n    if (focusedKey !== lastFocusedKey.current) {\n      if (scrollToItem) {\n        scrollToItem(focusedKey);\n      } else {\n        virtualizer.scrollToItem(focusedKey, {duration: 0});\n      }\n    }\n\n    lastFocusedKey.current = focusedKey;\n  }, [focusedKey, virtualizer.visibleRect.height, virtualizer, lastFocusedKey, scrollToItem]);\n\n  let isFocusWithin = useRef(false);\n  let onFocus = useCallback((e: FocusEvent) => {\n    // If the focused item is scrolled out of view and is not in the DOM, the collection\n    // will have tabIndex={0}. When tabbing in from outside, scroll the focused item into view.\n    // We only want to do this if the collection itself is receiving focus, not a child\n    // element, and we aren't moving focus to the collection from within (see below).\n    if (e.target === ref.current && !isFocusWithin.current) {\n      virtualizer.scrollToItem(focusedKey, {duration: 0});\n    }\n\n    isFocusWithin.current = e.target !== ref.current;\n  }, [ref, virtualizer, focusedKey]);\n\n  let onBlur = useCallback((e: FocusEvent) => {\n    isFocusWithin.current = ref.current.contains(e.relatedTarget as Element);\n  }, [ref]);\n\n  // When the focused item is scrolled out of view and is removed from the DOM,\n  // move focus to the collection view as a whole if focus was within before.\n  let focusedView = virtualizer.getView(focusedKey);\n  useEffect(() => {\n    if (focusedKey && !focusedView && isFocusWithin.current && document.activeElement !== ref.current) {\n      focusWithoutScrolling(ref.current);\n    }\n  });\n\n  return {\n    virtualizerProps: {\n      tabIndex: focusedView ? -1 : 0,\n      onFocus,\n      onBlur\n    }\n  };\n}\n\n// forwardRef doesn't support generic parameters, so cast the result to the correct type\n// https://stackoverflow.com/questions/58469229/react-with-typescript-generics-while-using-react-forwardref\nconst _Virtualizer = React.forwardRef(Virtualizer) as <T extends object, V>(props: VirtualizerProps<T, V> & {ref?: RefObject<HTMLDivElement>}) => ReactElement;\nexport {_Virtualizer as Virtualizer};\n\nfunction defaultRenderWrapper<T extends object, V>(\n  parent: ReusableView<T, V> | null,\n  reusableView: ReusableView<T, V>\n) {\n  return (\n    <VirtualizerItem\n      key={reusableView.key}\n      reusableView={reusableView}\n      parent={parent} />\n  );\n}\n"],"names":["$parcel$interopDefault","a","__esModule","default","cachedRTLResult","getRTLOffsetType","recalculate","outerDiv","document","createElement","outerStyle","style","width","height","overflow","direction","innerDiv","innerStyle","appendChild","body","scrollLeft","removeChild","getScrollLeft","node","scrollWidth","clientWidth","setScrollLeft","ScrollView","props","ref","contentSize","onVisibleRectChange","children","sizeToFit","onScrollStart","onScrollEnd","scrollDirection","otherProps","defaultRef","useRef","state","scrollTop","scrollEndTime","scrollTimeout","isScrolling","current","useLocale","setScrolling","useState","onScroll","useCallback","e","target","currentTarget","flushSync","Math","max","min","Rect","now","Date","clearTimeout","setTimeout","useEffect","useLayoutEffect","updateSize","dom","w","h","clientHeight","window","getComputedStyle","maxWidth","parseInt","isNaN","maxHeight","addEventListener","removeEventListener","padding","overflowX","overflowY","pointerEvents","position","ScrollViewForwardRef","React","forwardRef","useVirtualizerItem","options","reusableView","layoutInfo","virtualizer","size","getSize","updateItemSize","key","estimatedSize","Size","scrollHeight","VirtualizerItem","className","parent","layoutInfoToStyle","rendered","cache","WeakMap","dir","xProperty","cached","get","isSticky","top","rect","y","x","transition","WebkitTransition","WebkitTransitionDuration","transitionDuration","opacity","zIndex","transform","contain","set","Virtualizer","renderView","renderWrapper","layout","collection","isLoading","onLoadMore","fallbackRef","useVirtualizerState","defaultRenderWrapper","virtualizerProps","useVirtualizer","setVisibleRect","scrollOffset","mergeProps","isAnimating","undefined","startScrolling","endScrolling","visibleViews","focusedKey","scrollToItem","lastFocusedKey","visibleRect","duration","isFocusWithin","onFocus","onBlur","contains","relatedTarget","focusedView","getView","activeElement","focusWithoutScrolling","tabIndex","_Virtualizer"],"version":3,"file":"main.js.map"}